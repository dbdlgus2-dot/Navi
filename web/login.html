<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Navi - 로그인</title>

  <!-- ✅ Bootstrap (모달/폼 정렬 필수) -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- 기존 CSS -->
  <link rel="stylesheet" href="/css/login-navi.css?v=1" />
</head>
<body>
  <div class="bg">
    <div class="card">
      <div class="head">
        <div class="logo">N</div>
        <div>
          <h1>로그인sdf</h1>
          <div class="sub">수리/sdfsdf결제 관리</div>
        </div>
      </div>

      <form id="loginForm" class="form">
        <div class="field">
          <label>로그인 ID</label>
          <input class="input"
                name="login_id"
                required minlength="4" maxlength="20"
                pattern="^[A-Za-z0-9]{4,20}$"
                inputmode="latin"
                autocomplete="username"
                autocapitalize="characters"
                spellcheck="false"
                placeholder="영문/숫자 4~20자 (예: ABC123)"
              />
        </div>

        <div class="field">
          <label>비밀번호</label>
          <input class="input" name="password" type="password" placeholder="••••••••" autocomplete="current-password" required />
        </div>

        <button class="btn primary" type="submit">로그인</button>

        <span id="msg" class="msg"></span>

        <!-- ✅ 회원가입 + 찾기 버튼(회원가입 화면처럼 깔끔) -->
        <div class="row2">
          <a class="link" href="/register">회원가입</a>
          <div class="actions">
            <button type="button" class="chip" data-bs-toggle="modal" data-bs-target="#findIdModal">아이디 찾기</button>
            <button type="button" class="chip" data-bs-toggle="modal" data-bs-target="#resetPwModal">비밀번호 찾기</button>
          </div>
        </div>
      </form>
    </div>
  </div>

  <!-- ✅ 아이디 찾기 -->
  <div class="modal fade" id="findIdModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">아이디 찾기</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">이름</label>
            <input id="findIdName" class="form-control" placeholder="예) 홍길동" />
          </div>
          <div class="mb-2">
            <label class="form-label">이메일</label>
            <input id="findIdEmail" class="form-control" placeholder="예) test@naver.com" />
          </div>

          <div id="findIdResult" class="small text-muted mt-3"></div>
        </div>
        <div class="modal-footer d-flex justify-content-end gap-2">
          <button class="btn btn-outline-secondary" data-bs-dismiss="modal">닫기</button>
          <button id="btnFindId" class="btn btn-primary">찾기</button>
        </div>
      </div>
    </div>
  </div>

  <!-- ✅ 비밀번호 재발급 -->
  <div class="modal fade" id="resetPwModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">비밀번호 재발급</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="닫기"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label class="form-label">아이디</label>
            <input id="resetLoginId" class="form-control" placeholder="예)test" />
          </div>
          <div class="mb-3">
            <label class="form-label">이름</label>
            <input id="resetName" class="form-control" placeholder="예) 홍길동" />
          </div>
          <div class="mb-2">
            <label class="form-label">이메일</label>
            <input id="resetEmail" class="form-control" placeholder="예) test@naver.com" />
          </div>

          <div id="resetPwResult" class="mt-3"></div>
        </div>
        <div class="modal-footer d-flex justify-content-end gap-2">
        <button class="btn btn-outline-secondary" data-bs-dismiss="modal">닫기</button>
        <button id="btnResetPw" class="btn btn-danger">임시비번 발급</button>
      </div>
      </div>
    </div>
  </div>

  <!-- ✅ Bootstrap JS (모달 동작 필수) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <!-- ✅ 공용 JS -->
  <script src="/js/common.bind.js?v=1"></script>
  <script src="/js/app.js?v=2"></script>
  <script>
    // login 페이지는 login만 바인딩
    window.NAVI?.bindLogin?.();
  </script>
</body>
</html>